<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `ConnectionManager` struct in crate `crust`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, ConnectionManager">

    <title>crust::connection_manager::ConnectionManager - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../main.css">

    <link rel="shortcut icon" href="http://maidsafe.net/img/favicon.ico">
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        <a href='../../crust/index.html'><img src='http://maidsafe.net/img/Resources/branding/maidsafe_logo.fab2.png' alt='' width='100'></a>
        <p class='location'><a href='../index.html'>crust</a>::<wbr><a href='index.html'>connection_manager</a></p><script>window.sidebarCurrent = {name: 'ConnectionManager', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>crust</a>::<wbr><a href='index.html'>connection_manager</a>::<wbr><a class='struct' href=''>ConnectionManager</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-6173' class='srclink' href='../../src/crust/connection_manager.rs.html#40-43' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct ConnectionManager {
    // some fields omitted
}</pre><div class='docblock'><p>A structure representing a connection manager</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl <a class='struct' href='../../crust/connection_manager/struct.ConnectionManager.html' title='crust::connection_manager::ConnectionManager'>ConnectionManager</a></code></h3><div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>(event_pipe: <a class='struct' href='http://doc.rust-lang.org/nightly/std/sync/mpsc/struct.Sender.html' title='std::sync::mpsc::Sender'>Sender</a>&lt;<a class='enum' href='../../crust/connection_manager/enum.Event.html' title='crust::connection_manager::Event'>Event</a>&gt;) -&gt; <a class='struct' href='../../crust/connection_manager/struct.ConnectionManager.html' title='crust::connection_manager::ConnectionManager'>ConnectionManager</a></code></h4>
<div class='docblock'><p>Constructs a connection manager. User needs to create an asynchronous channel, and provide
the sender half to this method. Receiver will receive all <code>Event</code>s from this library.</p>
</div><h4 id='method.start_listening' class='method'><code>fn <a href='#method.start_listening' class='fnname'>start_listening</a>(&amp;mut self, hint: <a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Port.html' title='crust::Port'>Port</a>&gt;, beacon_port: <a class='enum' href='http://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>&gt;) -&gt; <a class='type' href='http://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>(<a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Port.html' title='crust::Port'>Port</a>&gt;, <a class='enum' href='http://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>&gt;)</a>&gt;</code></h4>
<div class='docblock'><p>Starts listening on all supported protocols. Specified hint will be tried first. If it fails
to start on these, it defaults to random / OS provided endpoints for each supported
protocol. The actual endpoints used will be returned on which it started listening for each
protocol.
if beacon port == 0 =&gt; a random port is taken and returned by beacon
if beacon port != 0 =&gt; an attempt to get the port is made by beacon and the callee will be informed of the attempt
if beacon port == None =&gt; 5483 is tried
if beacon succeeds in starting the udp listener, the coresponding port is returned</p>
</div><h4 id='method.start_listening2' class='method'><code>fn <a href='#method.start_listening2' class='fnname'>start_listening2</a>(&amp;mut self, hint: <a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Port.html' title='crust::Port'>Port</a>&gt;, beacon_port: <a class='enum' href='http://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>&gt;) -&gt; <a class='type' href='http://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>(<a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;, <a class='enum' href='http://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>&gt;)</a>&gt;</code></h4>
<div class='docblock'><p>For API compatibilty, return a vector of listening endpoints</p>
</div><h4 id='method.bootstrap' class='method'><code>fn <a href='#method.bootstrap' class='fnname'>bootstrap</a>(&amp;self, bootstrap_list: <a class='enum' href='http://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;&gt;, beacon_port: <a class='enum' href='http://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>&gt;) -&gt; <a class='type' href='http://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;</code></h4>
<div class='docblock'><p>This method tries to connect (bootstrap to exisiting network) to the default or provided
list of bootstrap nodes.</p>

<p>If <code>bootstrap_list</code> is <code>None</code>, it will attempt to read a local cached file to populate the
list.  It will then try to connect to all of the endpoints in the list.  It will return
once a connection with any of the endpoints is established with Ok(Endpoint) and it will
drop all other ongoing attempts.  If this fails and <code>beacon_port</code> is <code>Some</code>, it will try to
use the beacon port to connect to a peer on the same LAN.
For more details on bootstrap cache file refer
<a href="https://github.com/maidsafe/crust/blob/master/docs/bootstrap.md">https://github.com/maidsafe/crust/blob/master/docs/bootstrap.md</a></p>

<p>If <code>bootstrap_list</code> is <code>Some</code>, it will try to connect to all of the endpoints in the list.
It will return once a connection with any of the endpoints is established with Ok(Endpoint)
and it will drop all other ongoing attempts.  Note that <code>beacon_port</code> has no effect if
<code>bootstrap_list</code> is <code>Some</code>; i.e. passing an explicit list ensures we only get connected to
one of the nodes on the list - we don&#39;t fall back to use the beacon protocol.</p>

<p>It will return Err if it fails to connect to any peer.</p>
</div><h4 id='method.stop' class='method'><code>fn <a href='#method.stop' class='fnname'>stop</a>(&amp;self)</code></h4>
<div class='docblock'><p>This should be called before destroying an instance of a ConnectionManager to allow the
listener threads to join.  Once called, the ConnectionManager should be destroyed.</p>
</div><h4 id='method.connect' class='method'><code>fn <a href='#method.connect' class='fnname'>connect</a>(&amp;self, endpoints: <a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;)</code></h4>
<div class='docblock'><p>Opens a connection to a remote peer. <code>endpoints</code> is a vector of addresses of the remote
peer. All the endpoints will be tried. As soon as a connection is established, it will drop
all other ongoing attempts. On success <code>Event::NewConnection</code> with connected <code>Endpoint</code> will
be sent to the event channel. On failure, nothing is reported.
Failed attempts are not notified back up to the caller. If the caller wants to know of a
failed attempt, it must maintain a record of the attempt itself which times out if a
corresponding Event::NewConnection isn&#39;t received
For details on handling of connect in different protocol refer
<a href="https://github.com/dirvine/crust/blob/master/docs/connect.md">https://github.com/dirvine/crust/blob/master/docs/connect.md</a></p>
</div><h4 id='method.send' class='method'><code>fn <a href='#method.send' class='fnname'>send</a>(&amp;self, endpoint: <a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>, message: <a class='type' href='../../crust/connection_manager/type.Bytes.html' title='crust::connection_manager::Bytes'>Bytes</a>) -&gt; <a class='type' href='http://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Sends a message to specified address (endpoint). Returns Ok(()) if the sending might
succeed, and returns an Err if the address is not connected. Return value of Ok does not
mean that the data will be received. It is possible for the corresponding connection to hang
up immediately after this function returns Ok.</p>
</div><h4 id='method.drop_node' class='method'><code>fn <a href='#method.drop_node' class='fnname'>drop_node</a>(&amp;self, endpoint: <a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>)</code></h4>
<div class='docblock'><p>Closes connection with the specified endpoint.</p>
</div><h4 id='method.seek_peers' class='method'><code>fn <a href='#method.seek_peers' class='fnname'>seek_peers</a>(&amp;self, beacon_port: <a href='http://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>) -&gt; <a class='struct' href='http://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;</code></h4>
<div class='docblock'><p>Uses beacon to try and collect potential bootstrap endpoints from peers on the same subnet.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><code>impl <a class='trait' href='http://doc.rust-lang.org/nightly/core/ops/trait.Drop.html' title='core::ops::Drop'>Drop</a> for <a class='struct' href='../../crust/connection_manager/struct.ConnectionManager.html' title='crust::connection_manager::ConnectionManager'>ConnectionManager</a></code></h3><div class='impl-items'><h4 id='method.drop' class='method'><code>fn <a href='http://doc.rust-lang.org/nightly/core/ops/trait.Drop.html#method.drop' class='fnname'>drop</a>(&amp;mut self)</code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
            <p>
                Search functions by type signature (e.g.
                <code>vec -> usize</code>)
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "crust";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script async src="../../search-index.js"></script>
</body>
</html>